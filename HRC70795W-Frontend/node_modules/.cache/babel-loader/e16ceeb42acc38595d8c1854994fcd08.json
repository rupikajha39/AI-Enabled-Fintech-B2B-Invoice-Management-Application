{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\Rupika.LAPTOP-K3QFEE6T\\\\Downloads\\\\HRC70795W-Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"id\", \"value\", \"formattedValue\", \"api\", \"field\", \"row\", \"rowNode\", \"colDef\", \"cellMode\", \"isEditable\", \"tabIndex\", \"hasFocus\", \"getValue\", \"inputProps\", \"isValidating\", \"isProcessingProps\"];\nimport * as React from 'react';\nimport { unstable_composeClasses as composeClasses } from '@mui/material';\nimport { unstable_useEnhancedEffect as useEnhancedEffect } from '@mui/material/utils';\nimport InputBase from '@mui/material/InputBase';\nimport { getDataGridUtilityClass } from '../../constants/gridClasses';\nimport { useGridRootProps } from '../../hooks/utils/useGridRootProps';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes;\n  var slots = {\n    root: ['editInputCell']\n  };\n  return composeClasses(slots, getDataGridUtilityClass, classes);\n};\n\nexport function GridEditDateCell(props) {\n  var id = props.id,\n      valueProp = props.value,\n      api = props.api,\n      field = props.field,\n      colDef = props.colDef,\n      hasFocus = props.hasFocus,\n      inputProps = props.inputProps,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var isDateTime = colDef.type === 'dateTime';\n  var inputRef = React.useRef();\n  var valueTransformed = React.useMemo(function () {\n    var parsedDate;\n\n    if (valueProp == null) {\n      parsedDate = null;\n    } else if (valueProp instanceof Date) {\n      parsedDate = valueProp;\n    } else {\n      parsedDate = new Date((valueProp != null ? valueProp : '').toString());\n    }\n\n    var formattedDate;\n\n    if (parsedDate == null || Number.isNaN(parsedDate.getTime())) {\n      formattedDate = '';\n    } else {\n      var localDate = new Date(parsedDate.getTime() - parsedDate.getTimezoneOffset() * 60 * 1000);\n      formattedDate = localDate.toISOString().substr(0, isDateTime ? 16 : 10);\n    }\n\n    return {\n      parsed: parsedDate,\n      formatted: formattedDate\n    };\n  }, [valueProp, isDateTime]);\n\n  var _React$useState = React.useState(valueTransformed),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      valueState = _React$useState2[0],\n      setValueState = _React$useState2[1];\n\n  var rootProps = useGridRootProps();\n  var ownerState = {\n    classes: rootProps.classes\n  };\n  var classes = useUtilityClasses(ownerState);\n  var handleChange = React.useCallback(function (event) {\n    var newFormattedDate = event.target.value;\n    var newParsedDate;\n\n    if (newFormattedDate === '') {\n      newParsedDate = null;\n    } else {\n      var _newFormattedDate$spl = newFormattedDate.split('T'),\n          _newFormattedDate$spl2 = _slicedToArray(_newFormattedDate$spl, 2),\n          date = _newFormattedDate$spl2[0],\n          time = _newFormattedDate$spl2[1];\n\n      var _date$split = date.split('-'),\n          _date$split2 = _slicedToArray(_date$split, 3),\n          year = _date$split2[0],\n          month = _date$split2[1],\n          day = _date$split2[2];\n\n      newParsedDate = new Date();\n      newParsedDate.setFullYear(year, Number(month) - 1, day);\n      newParsedDate.setHours(0, 0, 0, 0);\n\n      if (time) {\n        var _time$split = time.split(':'),\n            _time$split2 = _slicedToArray(_time$split, 2),\n            hours = _time$split2[0],\n            minutes = _time$split2[1];\n\n        newParsedDate.setHours(Number(hours), Number(minutes), 0, 0);\n      }\n    }\n\n    setValueState({\n      parsed: newParsedDate,\n      formatted: newFormattedDate\n    });\n    api.setEditCellValue({\n      id: id,\n      field: field,\n      value: newParsedDate\n    }, event);\n  }, [api, field, id]);\n  React.useEffect(function () {\n    setValueState(function (state) {\n      var _valueTransformed$par, _state$parsed;\n\n      if (valueTransformed.parsed !== state.parsed && ((_valueTransformed$par = valueTransformed.parsed) == null ? void 0 : _valueTransformed$par.getTime()) !== ((_state$parsed = state.parsed) == null ? void 0 : _state$parsed.getTime())) {\n        return valueTransformed;\n      }\n\n      return state;\n    });\n  }, [valueTransformed]);\n  useEnhancedEffect(function () {\n    if (hasFocus) {\n      inputRef.current.focus();\n    }\n  }, [hasFocus]);\n  return /*#__PURE__*/_jsx(InputBase, _extends({\n    inputRef: inputRef,\n    fullWidth: true,\n    className: classes.root,\n    type: isDateTime ? 'datetime-local' : 'date',\n    inputProps: _extends({\n      max: isDateTime ? '9999-12-31T23:59' : '9999-12-31'\n    }, inputProps),\n    value: valueState.formatted,\n    onChange: handleChange\n  }, other));\n}\nexport var renderEditDateCell = function renderEditDateCell(params) {\n  return /*#__PURE__*/_jsx(GridEditDateCell, _extends({}, params));\n};","map":null,"metadata":{},"sourceType":"module"}